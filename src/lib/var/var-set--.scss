@import "../core/throw";
@import "../debug/debug-type";
@import "../debug/debug-value";
@import "../types/is-type-of--";
@import "var-type--";

/// Unsafe var-set()
/// @group var
/// @see var-set
@function var-set--($var, $value, $other...) {
  @if (map-get($var, read-only)) {
    @return throw("Assignment to constant variable", TypeError);
  }

  $type: var-type--($var);

  @if (not is-type-of--($type, $value)) {
    @return throw("Invalid variable value. Expected value of #{ debug-type($type) }, instead given #{ debug-value($value) }", "TypeError");
  }

  @return map-merge($var, (value: $value));
}